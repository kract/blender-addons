# Keymap Toolkit

Blenderのキーマップをカスタマイズするアドオンです。デフォルトのキーバインドを上書きして、より効率的なワークフローを実現します。

## 機能

### 3D Viewのキーマップカスタマイズ

- **Gキー（Grab）の無効化**: デフォルトのGキーによる移動機能を無効化します
- **Yキーの無効化**: デフォルトのYキーの機能を無効化します
- **ZキーをGrabに変更**: デフォルトのZキー（Shading PIE）を無効化し、代わりにGキー（Grab/移動）の機能を割り当てます
- **軸固定キーの変更**: 
  - X軸固定: そのまま（Xキー）
  - Y軸固定: Cキーに変更
  - Z軸固定: そのまま（Zキー）

## インストール

### 方法1: リモートリポジトリ（推奨）

1. `編集 > プリファレンス > 拡張機能` に移動
2. 「リポジトリ」の横のドロップダウン矢印をクリック
3. 「リモートリポジトリを追加」をクリック
4. リポジトリURLを入力: `https://blender.kract.jp/api/v1/extensions/`
5. 「リポジトリを追加」をクリック
6. リポジトリから「Keymap Toolkit」を検索してインストール

### 方法2: ドラッグ&ドロップ（Blender 4.2以降）

1. アドオンをZIPファイルとしてダウンロード
2. ZIPファイルをBlenderにドラッグ&ドロップ
3. アドオンが自動的にインストールされ、有効化されます

### 方法3: 従来のインストール方法

1. アドオンファイルをダウンロード
2. `編集 > プリファレンス > アドオン` に移動
3. `インストール...` をクリックしてZIPファイルを選択
4. 「Keymap Toolkit」アドオンを有効化

## 使用方法

アドオンをインストールして有効化すると、自動的にキーマップの変更が適用されます。

### キーマップの変更内容

| キー | デフォルトの機能 | 変更後の機能 |
|------|----------------|------------|
| G | Grab/移動 | 無効化 |
| Y | 軸固定（Y軸） | 無効化（手動設定でCキーに変更可能） |
| Z | Shading PIE | Grab/移動 |
| C | （様々） | 軸固定（Y軸）※transform中（手動設定が必要） |

### 軸固定の設定（手動設定が必要）

軸固定のキー変更（Y軸固定をCキーに）は、Blenderのキーマップ設定で手動で行う必要があります：

1. `編集 > プリファレンス > キーマップ` を開く
2. 検索ボックスで「Transform Modal Map」を検索
3. 「Transform Modal Map」を展開
4. 「Y」キーの「Axis Constraint Y」を見つけて削除または無効化
5. 「C」キーに新しいキーマップアイテムを追加：
   - オペレーター: `transform.constraint_set`
   - モード: `CONSTRAIN_AXIS`
   - 向き: `GLOBAL`
   - 制約軸: Y軸のみ有効（False, True, False）

**注意**: この機能は技術的な制約により、アドオンで自動設定できません。手動設定が必要です。

## 技術的な詳細

### キーマップの上書き方法

このアドオンは、Blenderのデフォルトキーマップを以下の方法で変更します:

1. **キーマップアイテムの無効化**: 既存のキーマップアイテムの`active`プロパティを`False`に設定
2. **新しいキーマップアイテムの追加**: 必要なキーに新しい機能を割り当て
3. **Transform Modal Mapの変更**: transform中の軸固定キーを変更

### サポートされているモード

- Object Mode
- Edit Mode（Mesh, Curve, Surface, Text, Armature, Metaball, Lattice）

## 互換性

- **Blenderバージョン**: 4.2.0以降
- **プラットフォーム**: クロスプラットフォーム（Windows, macOS, Linux）
- **言語**: 日本語と英語

## トラブルシューティング

### キーマップが適用されない

- アドオンが有効化されているか確認してください
- Blenderを再起動してみてください
- 他のアドオンとの競合がないか確認してください

### 軸固定が動作しない

- transform操作（移動、回転、スケール）中にCキーを押してください
- オブジェクトが選択されていることを確認してください

### キーマップを元に戻したい

- アドオンを無効化またはアンインストールすると、デフォルトのキーマップに戻ります

## 今後の改善予定

- カスタマイズ可能なキーマップ設定
- 追加のキーマッププリセット
- キーマップのインポート/エクスポート機能

## サポート

問題、機能リクエスト、質問がある場合は、プロジェクトリポジトリでIssueを作成してください。

## ライセンス

このプロジェクトはGPL 3.0以降のライセンスの下で公開されています。

